<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBbmHfS_lnio4OUmcX8KTE-hi4Tk4exSeo&sensor=false">
    </script>

    <script type="text/javascript" src="sodegaura_gmaps_01.js"></script>
    <script type="text/javascript" src="sodegaura_gmaps_02.js"></script>

    <script type="text/javascript">
      function addPath(map, coords, color) {
        var path = new google.maps.Polyline({
          path: coords,
          strokeColor: color,
          strokeOpacity: 1.0,
          strokeWeight: 2
        });

        path.setMap(map);
      }

      function findBoundingRectangle(cloud) {
        var minX, minY, maxX, maxY;

        minX = Math.min.apply(null, cloud.map(function(point) {
          return point.lat();
        }));

        minY = Math.min.apply(null, cloud.map(function(point) {
          return point.lng();
        }));

        maxX = Math.max.apply(null, cloud.map(function(point) {
          return point.lat();
        }));

        maxY = Math.max.apply(null, cloud.map(function(point) {
          return point.lng();
        }));

        var result = [
          new google.maps.LatLng(minX, minY),
          new google.maps.LatLng(minX, maxY),
          new google.maps.LatLng(maxX, maxY),
          new google.maps.LatLng(maxX, minY),
          new google.maps.LatLng(minX, minY)
        ];

        console.log(result);
        return result;
      };

      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(35.393795,140.089604),
          zoom: 17,
          mapTypeId: google.maps.MapTypeId.SATELLITE
        };
        window.map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

        var startLine = [
          new google.maps.LatLng(35.395000, 140.087851),
          new google.maps.LatLng(35.394827, 140.088220)
        ];

        addPath(map, findBoundingRectangle(window.sodegaura_01_coords), "#0000FF");
        addPath(map, window.sodegaura_01_coords, "#FF0000");
        addPath(map, window.sodegaura_02_coords, "#FF0000");

        addPath(map, startLine, "#0000FF");

        map.addListener('projection_changed', function() {
          var proj = window.map.getProjection();
          var insideCoords = window.sodegaura_01_coords.map(function(coord) {
            var p = proj.fromLatLngToPoint(coord);
            return '{x: ' + p.x + ', y: ' + p.y + '}';
          }).join(',<br>');

          var outsideCoords = window.sodegaura_02_coords.map(function(coord) {
            var p = proj.fromLatLngToPoint(coord);
            return '{x: ' + p.x + ', y: ' + p.y + '}';
          }).join(',<br>');

          document.getElementById("inside_coords").innerHTML = '[<br>' + insideCoords + '<br>]';
          document.getElementById("outside_coords").innerHTML = '[<br>' + outsideCoords + '<br>]';
        })
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:50%; height:100%; float: left;"></div>
    <div id="inside_coords" style="width:25%; height:100%; float: left;">Hello</div>
    <div id="outside_coords" style="width:25%; height:100%; float: left;">Hello2</div>
  </body>
</html>