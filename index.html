<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>GPS</title>

		<script type="text/javascript" src="sodegaura_coords_01.js"></script>
		<script type="text/javascript" src="sodegaura_coords_02.js"></script>

		<script>
			function boundingRectangle(northWest, southEast) {
				var origin = northWest,
					opposite = southEast;

				function BoundingRectangle() {
					return this;
				};

				function width() {
					return opposite.x - origin.x;
				};

				function height() {
					return opposite.y - origin.y;
				};

				BoundingRectangle.prototype.moveTo = function(newOrigin) {
					opposite = {x: opposite.x - (origin.x - newOrigin.x), y: opposite.y - (origin.y - newOrigin.y)};
					origin = newOrigin;
				};

				BoundingRectangle.prototype.scale = function(scale) {
					opposite = {x: opposite.x * scale, y: opposite.y * scale};
				};

				BoundingRectangle.prototype.drawOn = function(context, strokeColor) {
					context.strokeStyle = "red";
					context.strokeRect(origin.x, origin.y, width(), height());
				};

				return new BoundingRectangle();
			};

			function findBoundingRectangle(cloud) {
				var minX, minY, maxX, maxY;

				minX = Math.min.apply(null, cloud.map(function(point) {
					return point.x;
				}));

				minY = Math.min.apply(null, cloud.map(function(point) {
					return point.y;
				}));

				maxX = Math.max.apply(null, cloud.map(function(point) {
					return point.x;
				}));

				maxY = Math.max.apply(null, cloud.map(function(point) {
					return point.y;
				}));

				return boundingRectangle({x: minX, y: minY}, {x: maxX, y: maxY});
			};

			window.onload = function() {
				var outside = window.sodegaura_01_coords;
				var inside = window.sodegaura_02_coords;

				var boundingRectangle = findBoundingRectangle(outside);

				var canvas = document.getElementById('grid');
				var ctx = canvas.getContext('2d');

				boundingRectangle.moveTo({x: 0, y: 0});
				boundingRectangle.scale(60000);
				boundingRectangle.drawOn(ctx, 'red');				
				// var scale = 60000;
				// ctx.scale(scale, scale);
				// ctx.translate(-origin.x, -origin.y);

				// var firstOut = outside.shift();
				// ctx.beginPath();
				// ctx.moveTo(firstOut.x, firstOut.y);

				// outside.forEach(function(coordinate) {
				// 	ctx.lineTo(coordinate.x, coordinate.y);
				// });

				// ctx.lineWidth = 2 / scale;
				// ctx.strokeStyle = 'red';
				// ctx.stroke();

				// var firstIn = inside.shift();
				// ctx.beginPath();
				// ctx.moveTo(firstIn.x, firstIn.y);

				// inside.forEach(function(coordinate) {
				// 	ctx.lineTo(coordinate.x, coordinate.y);
				// });

				// ctx.lineWidth = 2 / scale;
				// ctx.strokeStyle = 'blue';
				// ctx.stroke();
			};
		</script>
	</head>
	<body>
			<canvas id="grid" width="500" height="250" style="border-style:solid; border-width:1px;"></canvas>
	</body>
</html>